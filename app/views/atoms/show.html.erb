<h1><%= @atom.title %></h1>

<%= form_for @atom do |f| %>
  <%= f.text_field :title %>
  <%= f.submit "Rename" %>
<% end %>

<h2>Parent Connections</h2>
<ul>
  <% @atom.child_connections.each do |connection| %>
    <li>
      <%= link_to connection.parent.title, connection.parent %>
      <%= link_to 'V',  connection %>
      <%= link_to 'X',  connection,  method: :delete %>
    </li>
  <% end %>
  <li>
    <%= form_for Connection.new do |f| %>
      <%= f.hidden_field :child_atom_id, value: @atom.id %>
      <%= f.fields_for Atom.new do |a| %>
        <%= a.text_field :title, { autocomplete: 'off' } %>
      <% end %>
      <%= f.submit "Add" %>
    <% end %>
  </li>
</ul>

<h2>Child Connections</h2>
<ul>
  <% @atom.parent_connections.each do |connection| %>
    <li>
      <%= link_to connection.child.title, connection.child %>
      <%= link_to 'V',  connection %>
      <%= link_to 'X',  connection,  method: :delete %>
    </li>
  <% end %>
  <%= form_for Connection.new do |f| %>
    <%= f.hidden_field :parent_atom_id, value: @atom.id %>
    <%= f.fields_for Atom.new do |a| %>
      <%= a.text_field :title, { autocomplete: 'off' } %>
    <% end %>
    <%= f.submit "Add" %>
  <% end %>
</ul>

<h2>Sibling Connections</h2>
<ul>
  <% @atom.siblings.each do |sibling| %>
    <li><%= link_to sibling.title, sibling %></li>
  <% end %>
</ul>

<h4>Versions</h4>

<%= render 'shared/versions', versions: @atom.versions %>

<hr>

<%= link_to "Delete #{@atom.title}", @atom, method: :delete %>
